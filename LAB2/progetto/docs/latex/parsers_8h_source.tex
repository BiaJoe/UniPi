\doxysection{parsers.\+h}
\hypertarget{parsers_8h_source}{}\label{parsers_8h_source}\index{include/parsers.h@{include/parsers.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ <time.h>}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#ifndef\ PARSERS\_H}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#define\ PARSERS\_H}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#define\ RESCUERS\_CONF\ "{}conf/rescuers.conf"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ EMERGENCY\_TYPES\_CONF\ "{}conf/emergency\_types.conf"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#define\ ENV\_CONF\ "{}conf/env.conf"{}}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#define\ STR\_HELPER(x)\ \#x}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ STR(x)\ STR\_HELPER(x)}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#define\ MAX\_FILE\_LINES\ 512}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#define\ MAX\_LINE\_LENGTH\ 1024}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#define\ MAX\_RESCUER\_NAME\_LENGTH\ 128}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#define\ EMERGENCY\_NAME\_LENGTH\ 64}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ MAX\_RESCUER\_REQUESTS\_LENGTH\ 1024}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#define\ MAX\_RESCUER\_TYPES\_COUNT\ 64}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#define\ MAX\_EMERGENCY\_TYPES\_COUNT\ 128}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#define\ MAX\_RESCUER\_REQ\_NUMBER\_PER\_EMERGENCY\ 16}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#define\ MIN\_EMERGENCY\_PRIORITY\ 0}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#define\ MAX\_EMERGENCY\_PRIORITY\ 3}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#define\ MIN\_RESCUER\_SPEED\ 1}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#define\ MAX\_RESCUER\_SPEED\ 100}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#define\ MIN\_RESCUER\_AMOUNT\ 1}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#define\ MAX\_RESCUER\_AMOUNT\ 1000}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#define\ MIN\_RESCUER\_REQUIRED\_COUNT\ 1}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#define\ MAX\_RESCUER\_REQUIRED\_COUNT\ 32}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#define\ MIN\_COORDINATE\ 0}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#define\ MAX\_COORDINATE\ 1000}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#define\ MIN\_TIME\_TO\_MANAGE\ 1}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#define\ MAX\_TIME\_TO\_MANAGE\ 1000}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#define\ RESCUERS\_SYNTAX\ "{}[\%"{}\ STR(MAX\_RESCUER\_NAME\_LENGTH)\ "{}[\string^]]][\%d][\%d][\%d;\%d]"{}}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#define\ RESCUER\_REQUEST\_SYNTAX\ "{}\%"{}\ STR(MAX\_RESCUER\_NAME\_LENGTH)\ "{}[\string^:]:\%d,\%d"{}}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#define\ EMERGENCY\_TYPE\_SYNTAX\ "{}[\%"{}\ STR(EMERGENCY\_NAME\_LENGTH)\ "{}[\string^]]][\%d]\ \%"{}\ STR(MAX\_RESCUER\_REQUESTS\_LENGTH)\ "{}[\string^\(\backslash\)n]"{}}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#define\ IGNORE\_EMPITY\_LINES()\ if\ (line[0]\ ==\ '\(\backslash\)n')\ continue}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00047\ \ \ \ \ IDLE,}
\DoxyCodeLine{00048\ \ \ \ \ EN\_ROUTE\_TO\_SCENE,}
\DoxyCodeLine{00049\ \ \ \ \ ON\_SCENE,}
\DoxyCodeLine{00050\ \ \ \ \ RETURNING\_TO\_BASE}
\DoxyCodeLine{00051\ \}\ rescuer\_status\_t;}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{comment}{//\ Foreward\ declaration\ per\ rescuer\_digital\_twin}}
\DoxyCodeLine{00054\ \textcolor{comment}{//\ per\ evitare\ dipendenze\ circolari}}
\DoxyCodeLine{00055\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrescuer__digital__twin}{rescuer\_digital\_twin}};\ }
\DoxyCodeLine{00056\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrescuer__digital__twin}{rescuer\_digital\_twin}}\ \mbox{\hyperlink{structrescuer__digital__twin}{rescuer\_digital\_twin\_t}};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{char}\ *rescuer\_type\_name;}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{int}\ amount;}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{int}\ speed;}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{int}\ x;}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{int}\ y;}
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{structrescuer__digital__twin}{rescuer\_digital\_twin\_t}}\ **twins;}
\DoxyCodeLine{00065\ \}\ \mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}};}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrescuer__digital__twin}{rescuer\_digital\_twin}}\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{int}\ id;}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{int}\ x;}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordtype}{int}\ y;}
\DoxyCodeLine{00071\ \ \ \ \ \mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}}\ *rescuer;}
\DoxyCodeLine{00072\ \ \ \ \ rescuer\_status\_t\ status;}
\DoxyCodeLine{00073\ \};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}}\ *type;}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{int}\ required\_count;}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{int}\ time\_to\_manage;}
\DoxyCodeLine{00084\ \}\ \mbox{\hyperlink{structrescuer__request__t}{rescuer\_request\_t}};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{short}\ priority;}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordtype}{char}\ *emergency\_desc;}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{structrescuer__request__t}{rescuer\_request\_t}}\ *rescuers;}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordtype}{int}\ rescuers\_req\_number;}
\DoxyCodeLine{00091\ \}\ \mbox{\hyperlink{structemergency__type__t}{emergency\_type\_t}};}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00103\ \ \ \ \ WAITING,}
\DoxyCodeLine{00104\ \ \ \ \ ASSIGNED,}
\DoxyCodeLine{00105\ \ \ \ \ IN\_PROGRESS,}
\DoxyCodeLine{00106\ \ \ \ \ PAUSED,}
\DoxyCodeLine{00107\ \ \ \ \ COMPLETED,}
\DoxyCodeLine{00108\ \ \ \ \ CANCELED,}
\DoxyCodeLine{00109\ \ \ \ \ TIMEOUT}
\DoxyCodeLine{00110\ \}\ emergency\_status\_t;}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordtype}{char}\ emergency\_name[EMERGENCY\_NAME\_LENGTH];}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordtype}{int}\ x;}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordtype}{int}\ y;}
\DoxyCodeLine{00116\ \ \ \ \ time\_t\ timestamp;}
\DoxyCodeLine{00117\ \}\ \mbox{\hyperlink{structemergency__request__t}{emergency\_request\_t}};}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00121\ \ \ \ \ \mbox{\hyperlink{structemergency__type__t}{emergency\_type\_t}}\ type;}
\DoxyCodeLine{00122\ \ \ \ \ emergency\_status\_t\ status;}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordtype}{int}\ x;}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordtype}{int}\ y;}
\DoxyCodeLine{00125\ \ \ \ \ time\_t\ time;}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordtype}{int}\ rescuer\_count;}
\DoxyCodeLine{00127\ \ \ \ \ \mbox{\hyperlink{structrescuer__digital__twin}{rescuer\_digital\_twin\_t}}\ *rescuers\_dt;}
\DoxyCodeLine{00128\ \}\ \mbox{\hyperlink{structemergency__t}{emergency\_t}};}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \textcolor{keywordtype}{int}\ rescuer\_arleady\_exists(\textcolor{keywordtype}{char}\ *name,\ \textcolor{keywordtype}{char}\ rescuer\_names\_buffer[][MAX\_RESCUER\_NAME\_LENGTH]);}
\DoxyCodeLine{00136\ \mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}}\ **\ parse\_rescuers(\textcolor{keywordtype}{int}*\ rescuer\_types);}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}}\ **\ parse\_rescuers2(\textcolor{keywordtype}{int}*\ rescuer\_types);}
\DoxyCodeLine{00139\ \mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}}\ **\ init\_rescuer\_types();}
\DoxyCodeLine{00140\ \textcolor{keywordtype}{int}\ rescuer\_values\_are\_illegal(\textcolor{keywordtype}{char}\ *name,\ \textcolor{keywordtype}{int}\ amount,\ \textcolor{keywordtype}{int}\ speed,\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y);}
\DoxyCodeLine{00141\ \textcolor{keywordtype}{void}\ allocate\_rescuer\_type(\textcolor{keywordtype}{char}\ *name,\ \textcolor{keywordtype}{int}\ amount,\ \textcolor{keywordtype}{int}\ speed,\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}}\ **rescuer\_types);}
\DoxyCodeLine{00142\ \mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}}\ *\ get\_rescuer\_type\_by\_name(\textcolor{keywordtype}{char}\ *name,\ \mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}}\ **rescuer\_types);}
\DoxyCodeLine{00143\ \textcolor{keywordtype}{int}\ get\_rescuer\_type\_index\_by\_name(\textcolor{keywordtype}{char}\ *name,\ \mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}}\ **rescuer\_types);}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \mbox{\hyperlink{structemergency__type__t}{emergency\_type\_t}}\ **\ parse\_emergencies(\textcolor{keywordtype}{int}*\ emergency\_count,\ \mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}}\ **rescuer\_types);}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \textcolor{keywordtype}{void}\ check\_emergency\_type\_syntax\_and\_extract\_values(}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordtype}{char}\ *line,\ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordtype}{short}\ *priority,\ }
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordtype}{char}\ *emergency\_desc,\ }
\DoxyCodeLine{00151\ \ \ \ \ \mbox{\hyperlink{structrescuer__request__t}{rescuer\_request\_t}}\ **rescuers,}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordtype}{int}\ *rescuer\_req\_number,}
\DoxyCodeLine{00153\ \ \ \ \ \mbox{\hyperlink{structrescuer__type__t}{rescuer\_type\_t}}\ **rescuer\_types}
\DoxyCodeLine{00154\ );}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
